<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>在 Raspberry Pi OS 64bit 上編譯 Chromium 以安裝 Google Remote Desktop 指南</title>
    <style>
        body {
            font-family: sans-serif;
            font-size: 16px; /* 設定內文基本字體大小 */
            line-height: 1.6;
            margin: 20px;
        }
        h1, h2, h3 {
            color: #333;
        }
        pre {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            overflow-x: auto; /* 水平捲動 */
            position: relative; /* 為了定位複製按鈕 */
            margin-bottom: 1em; /* 與下方段落間距 */
        }
        code {
            font-family: monospace;
            font-size: 0.95em; /* 微調程式碼字體大小 */
            display: block; /* 讓 code 區塊化 */
            white-space: pre; /* 保留空白和換行 */
        }
        .copy-button {
            position: absolute;
            top: 5px;
            right: 5px;
            padding: 5px 10px;
            font-size: 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }
        pre:hover .copy-button {
            opacity: 1;
        }
        .copy-button:active {
            background-color: #0056b3;
        }
        .copied-feedback {
            position: absolute;
            top: 5px;
            right: 5px;
            padding: 5px 10px;
            font-size: 12px;
            background-color: #28a745;
            color: white;
            border-radius: 3px;
            display: none; /* 初始隱藏 */
        }
    </style>
</head>
<body>

    <h1>在 Raspberry Pi OS 64bit 上編譯 Chromium 以安裝 Google Remote Desktop 指南</h1>

    <h2>重要警告與前提：</h2>
    <ol>
        <li><strong>極度耗時耗資源：</strong> 在 Raspberry Pi（即使是 Pi 4 或 Pi 5）上完整編譯 Chromium 是 <strong>非常非常</strong> 耗時的過程，可能需要 <strong>數天</strong> 才能完成。它需要大量的 CPU 算力、RAM（建議至少 8GB，越多越好）以及大量的 <strong>高速</strong> 儲存空間（建議使用 NVMe SSD，至少需要 100GB 以上的可用空間）。</li>
        <li><strong>高失敗率：</strong> 編譯過程複雜，容易因資源不足、依賴性問題、原始碼變更等因素失敗。</li>
        <li><strong>Google Remote Desktop 相容性：</strong> Google Remote Desktop 的主機端服務（<code>chrome-remote-desktop</code>）通常 <strong>設計為與官方 Google Chrome 瀏覽器配合使用</strong>。使用自行編譯的 Chromium <em>可能</em> 可以運作，但 <strong>無法保證</strong> 100% 相容，且可能遇到無法預期的問題。官方不提供對此類配置的支援。</li>
        <li><strong>替代方案：</strong> 強烈建議 <strong>優先考慮使用 Raspberry Pi OS 官方儲存庫提供的 Chromium 版本</strong> (<code>sudo apt install chromium-browser</code>)。如果該版本無法滿足 Google Remote Desktop 的需求（雖然通常是可以的），再考慮這個極其複雜的編譯過程。或者探索其他遠端桌面方案（如 VNC、xrdp、NoMachine 等）。</li>
        <li><strong>“一次下載齊” 的困難：</strong> Chromium 專案極其龐大，其原始碼和所有依賴的函式庫（透過 <code>depot_tools</code> 管理）以及系統級的編譯工具和函式庫（透過 <code>apt</code> 管理），無法真正意義上「一次下載齊全」。<code>depot_tools</code> 會在 <code>fetch</code> 階段下載核心碼，並在 <code>gclient sync</code> 時下載大量依賴。系統依賴則需要透過 <code>apt</code> 安裝。本指南會盡力引導您準備好主要工具和執行依賴安裝腳本，但過程本身就是動態的。</li>
    </ol>

    <h2>步驟詳解：</h2>

    <h3>第 1 步：系統準備</h3>
    <ol>
        <li><p><strong>更新系統：</strong> 確保您的 Raspberry Pi OS 64-bit 是最新的。</p>
            <pre><code>sudo apt update
sudo apt full-upgrade -y
sudo apt autoremove -y
sudo reboot</code></pre>
        </li>
        <li><p><strong>安裝基本工具：</strong></p>
            <pre><code>sudo apt install -y build-essential git pkg-config ninja-build python3 clang libnss3-dev libgdk-pixbuf2.0-dev libgtk-3-dev libxss-dev libasound2-dev uuid-dev screen tmux</code></pre>
            <ul>
                <li><code>build-essential</code>: 包含 C/C++ 編譯器 (gcc/g++) 和 make 等基本工具。</li>
                <li><code>git</code>: 版本控制系統，用於下載 <code>depot_tools</code>。</li>
                <li><code>pkg-config</code>: 管理編譯時的函式庫依賴。</li>
                <li><code>ninja-build</code>: Chromium 使用的現代化、快速的建置系統。</li>
                <li><code>python3</code>: Chromium 建置腳本需要 Python 3。</li>
                <li><code>clang</code>: Chromium 偏好使用 Clang 作為編譯器。</li>
                <li>後面幾個 <code>lib*</code>: 是一些常見的圖形、聲音、安全相關的開發庫，雖然 <code>install-build-deps.sh</code> 會處理大部分，但先裝上沒壞處。</li>
                <li><code>uuid-dev</code>: 有時需要的 UUID 產生庫。</li>
                <li><code>screen</code> / <code>tmux</code>: 強烈建議使用！編譯時間極長，使用這些工具可以讓您斷開 SSH 連線而不中斷編譯過程。</li>
            </ul>
        </li>
        <li><p><strong>增加 Swap 交換空間 (非常重要！):</strong> Raspberry Pi 的 RAM 可能不足以應付編譯峰值。增加 Swap 可以防止因記憶體耗盡導致編譯失敗。</p>
            <ul>
                <li><strong>檢查現有 Swap:</strong> <pre><code>free -h</code></pre> 或 <pre><code>swapon --show</code></pre></li>
                <li><strong>關閉現有 Swap (如果是 dphys-swapfile):</strong> <pre><code>sudo systemctl stop dphys-swapfile && sudo systemctl disable dphys-swapfile</code></pre> (如果存在的話)</li>
                <li><p><strong>創建 Swap 文件 (例如 8GB):</strong></p>
                    <pre><code>sudo fallocate -l 8G /swapfile  # 依據你的需求和硬碟空間調整大小
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile</code></pre>
                </li>
                <li><p><strong>讓 Swap 永久生效:</strong></p>
                    編輯 <code>/etc/fstab</code>: <pre><code>sudo nano /etc/fstab</code></pre>
                    在文件末尾添加一行：
                    <pre><code>/swapfile none swap sw 0 0</code></pre>
                    保存並退出 (Ctrl+X, Y, Enter)。
                </li>
                <li><p><strong>調整 Swappiness (可選，建議):</strong> 降低系統使用 Swap 的傾向，優先使用 RAM。</p>
                    <pre><code>sudo sysctl vm.swappiness=10
# 永久生效
echo 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf</code></pre>
                </li>
                <li><strong>重啟或立即生效:</strong> <pre><code>sudo sysctl -p</code></pre> 或直接 <pre><code>reboot</code></pre>。</li>
            </ul>
        </li>
    </ol>

    <h3>第 2 步：取得 Chromium 原始碼與工具</h3>
    <ol>
        <li><p><strong>建立工作目錄：</strong></p>
            <pre><code>mkdir ~/chromium && cd ~/chromium</code></pre>
        </li>
        <li><p><strong>下載 depot_tools：</strong> 這是 Google 用來管理 Chromium 及相關專案原始碼的工具集。</p>
            <pre><code>git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git</code></pre>
        </li>
        <li><p><strong>將 depot_tools 加入 PATH：</strong></p>
            <pre><code>echo 'export PATH="$HOME/chromium/depot_tools:$PATH"' >> ~/.bashrc
source ~/.bashrc</code></pre>
            <ul><li>驗證： <pre><code>which gclient</code></pre> 應該會輸出 <code>depot_tools</code> 目錄下的路徑。</li></ul>
        </li>
        <li><p><strong>下載 Chromium 原始碼 (極其耗時，可能數小時甚至更久，且需要大量空間):</strong></p>
            <ul><li><strong>強烈建議在 <code>screen</code> 或 <code>tmux</code> 中執行此步驟！</strong>
                <pre><code>screen  # 或 tmux new-session -s chromium_fetch</code></pre>
            </li></ul>
            <ul><li>開始下載：
                <pre><code>fetch --no-history --nohooks chromium # --no-history 減少下載量，--nohooks 暫時跳過 gclient runhooks
cd src</code></pre>
            </li></ul>
            <ul><li>下載完成後，你可以按 <code>Ctrl+A</code> 然後按 <code>D</code> 來分離 <code>screen</code> 會話，之後用 <code>screen -r</code> 重新連接。<code>tmux</code> 則是 <code>Ctrl+B</code> 然後 <code>D</code> 分離，<code>tmux attach-session -t chromium_fetch</code> 重新連接。</li></ul>
        </li>
    </ol>

    <h3>第 3 步：安裝建置依賴</h3>
     <ol>
        <li><p><strong>執行依賴安裝腳本 (可能需要數十分鐘):</strong> Chromium 提供了一個腳本來嘗試安裝所有需要的開發包。</p>
            <ul><li><strong>在 <code>src</code> 目錄下執行：</strong>
                <pre><code>./build/install-build-deps.sh --arm --no-chromeos-fonts</code></pre>
                <ul>
                    <li><code>--arm</code>: 指示為 ARM 架構安裝依賴（雖然我們是 arm64，這個參數通常也適用或被腳本內部正確處理）。</li>
                    <li><code>--no-chromeos-fonts</code>: 我們不需要 ChromeOS 的字體。</li>
                </ul>
            </li></ul>
            <ul><li><strong>如果提示權限不足，使用 <code>sudo</code>：</strong>
                <pre><code>sudo ./build/install-build-deps.sh --arm --no-chromeos-fonts</code></pre>
            </li></ul>
            <ul><li><strong>仔細觀察輸出：</strong> 這個腳本會執行 <code>apt-get update</code> 和 <code>apt-get install</code>。注意是否有錯誤訊息，特別是找不到的套件 (<code>E: Unable to locate package ...</code>)。</li></ul>
        </li>
        <li><p><strong>處理缺檔補檔 (除錯關鍵點 1):</strong></p>
            <ul>
                <li><strong>記錄錯誤：</strong> 如果 <code>install-build-deps.sh</code> 報錯說找不到某些套件，請 <strong>記下這些套件名稱</strong>。</li>
                <li><strong>手動搜尋與安裝：</strong>
                    <ul>
                        <li>嘗試使用 <pre><code>apt search &lt;package_name&gt;</code></pre> 搜尋是否有替代名稱或版本。</li>
                        <li>如果找到，使用 <pre><code>sudo apt install &lt;found_package_name&gt;</code></pre> 安裝。</li>
                        <li>如果真的找不到，可能表示：
                            <ul>
                                <li>該依賴對於 ARM64 不是必需的，可以嘗試忽略（有風險）。</li>
                                <li>需要從其他來源（例如 backports 或手動編譯）取得。</li>
                                <li>Raspberry Pi OS 的套件庫與標準 Debian/Ubuntu 有差異。</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><strong>重複執行：</strong> 在手動安裝一些套件後，可以 <strong>再次執行</strong> <pre><code>sudo ./build/install-build-deps.sh --arm --no-chromeos-fonts</code></pre>，看看是否能解決更多依賴。</li>
            </ul>
        </li>
        <li><p><strong>同步專案依賴 (gclient sync):</strong> 這個步驟會下載 Chromium 依賴的其他專案（如 V8 引擎、Skia 圖形庫等），同樣非常耗時耗空間。</p>
            <ul><li><strong>在 <code>src</code> 目錄下執行 (同樣建議在 <code>screen</code> 或 <code>tmux</code> 中):</strong>
                <pre><code>gclient sync --no-history --nohooks</code></pre>
                <ul><li>這個過程也會檢查 Python 版本等環境設定。</li></ul>
            </li></ul>
        </li>
    </ol>

    <h3>第 4 步：設定建置參數 (GN)</h3>
    <ol>
        <li><p><strong>產生建置設定：</strong> GN (Generate Ninja) 是 Chromium 的設定工具。</p>
            <pre><code class="language-bash">gn gen out/Default --args='
target_os = "linux"
target_cpu = "arm64"
is_debug = false
is_component_build = false
symbol_level = 0
enable_nacl = false
remove_webcore_debug_symbols = true
dcheck_always_on = false
use_goma = false # 我們沒有 Google 內部編譯加速服務
use_jumbo_build = true # 可能加速編譯，但增加 RAM 需求
enable_widevine = true # 如果你需要 DRM 支援 (如 Netflix)
proprietary_codecs = true # 支援 H.264 等專有編解碼器
ffmpeg_branding = "Chrome" # 搭配 proprietary_codecs 使用
'</code></pre>
            <ul>
                <li><strong>參數說明 (關鍵):</strong>
                    <ul>
                        <li><code>target_os = "linux"</code>: 目標作業系統。</li>
                        <li><code>target_cpu = "arm64"</code>: <strong>必須</strong> 指定為 64 位元 ARM。</li>
                        <li><code>is_debug = false</code>: 建立 Release 版本，速度更快，體積更小。Debug 版本幾乎無法在 Pi 上編譯。</li>
                        <li><code>is_component_build = false</code>: 建立靜態連結的執行檔，速度較快，但增量編譯較慢。對於完整編譯，建議 <code>false</code>。</li>
                        <li><code>symbol_level = 0</code>: 不包含除錯符號，大幅減少最終二進制大小和編譯時間。</li>
                        <li><code>enable_nacl = false</code>: 禁用 Native Client，通常不需要，可節省大量編譯時間。</li>
                        <li><code>remove_webcore_debug_symbols = true</code>: 移除 WebCore 除錯符號。</li>
                        <li><code>dcheck_always_on = false</code>: 關閉開發檢查。</li>
                        <li><code>use_goma = false</code>: 我們沒有 Google 內部編譯加速服務。</li>
                        <li><code>use_jumbo_build = true</code>: Jumbo/Unity build 嘗試將多個 C++ 文件合併編譯，可能加速，但可能需要更多 RAM。如果 RAM 不足導致編譯失敗，可嘗試設為 <code>false</code>。</li>
                        <li><code>enable_widevine = true</code>: 允許支援 Widevine CDM，用於播放受保護內容。</li>
                        <li><code>proprietary_codecs = true</code> 和 <code>ffmpeg_branding = "Chrome"</code>: 啟用對 H.264, AAC 等常見專有媒體格式的支援。<strong>注意：這可能會涉及專利授權問題，請確保您有權使用這些編解碼器。</strong> 如果不需要，可以都設為 <code>false</code>。</li>
                    </ul>
                </li>
                <li><strong>編輯參數:</strong> 如果需要修改，可以直接編輯 <code>out/Default/args.gn</code> 文件，然後保存。每次修改後不需要重新執行 <code>gn gen</code>。</li>
            </ul>
        </li>
    </ol>

    <h3>第 5 步：開始編譯 (Ninja)</h3>
    <ol>
        <li><p><strong>執行編譯 (極度漫長，數小時至數天):</strong></p>
            <ul><li><strong>務必在 <code>screen</code> 或 <code>tmux</code> 中執行！</strong></li></ul>
            <ul><li>使用 <code>autoninja</code>（<code>depot_tools</code> 提供的 <code>ninja</code> 包裝器，能更好地處理一些細節）：
                <pre><code>autoninja -C out/Default chrome chrome_sandbox chromedriver</code></pre>
                <ul>
                    <li><code>-C out/Default</code>: 指定建置目錄。</li>
                    <li><code>chrome</code>: 主要的瀏覽器目標。</li>
                    <li><code>chrome_sandbox</code>: 必要的沙箱程序。</li>
                    <li><code>chromedriver</code>: 如果你需要 WebDriver。</li>
                </ul>
            </li></ul>
            <ul><li><strong>監控資源：</strong> 在編譯過程中，可以另開一個終端視窗，使用 <code>htop</code> 或 <code>top</code> 監控 CPU、RAM 和 Swap 的使用情況。如果 Swap 長時間 100% 滿載且系統反應遲鈍，可能表示 RAM + Swap 仍然不足。</li></ul>
            <ul><li><strong>編譯失敗處理 (除錯關鍵點 2):</strong>
                <ul>
                    <li><strong>仔細閱讀錯誤訊息：</strong> Ninja 會在遇到第一個錯誤時停止。向上捲動找到詳細的錯誤輸出，通常是 C++ 編譯器 (clang++) 或連結器 (ld) 的錯誤。</li>
                    <li><strong>常見錯誤類型：</strong>
                        <ul>
                            <li><strong>找不到標頭檔 (<code>.h</code> file not found):</strong> 通常是缺少某個開發庫 (<code>-dev</code> 套件)。回到第 3 步，嘗試找出缺少的套件並安裝。可能需要 <code>apt search</code> 或在網路上搜尋哪個套件提供該標頭檔。</li>
                            <li><strong>連結錯誤 (undefined reference to ...):</strong> 缺少某個函式庫 (<code>.so</code> 或 <code>.a</code>)。同樣是缺少開發庫。</li>
                            <li><strong>編譯器內部錯誤 (Internal Compiler Error - ICE):</strong> 可能是 Clang 的 Bug，或者更常見的是 <strong>記憶體不足</strong>。嘗試：
                                <ul>
                                    <li>減少並行任務數：<pre><code>autoninja -j 1 -C out/Default chrome ...</code></pre> ( <code>-j 1</code> 表示只用一個核心編譯，非常慢但最省資源)。</li>
                                    <li>確保 Swap 空間足夠且可用。</li>
                                    <li>嘗試關閉 Jumbo build (<code>use_jumbo_build = false</code> in <code>args.gn</code>)。</li>
                                </ul>
                            </li>
                            <li><strong>模板或 C++ 語法錯誤：</strong> 如果錯誤指向 Chromium 原始碼內部，且你使用的是官方穩定分支，這比較少見。可能是工具鏈 (Clang 版本) 與原始碼不完全相容，或設定有誤。</li>
                            <li><strong>資源耗盡 (Killed):</strong> Linux OOM Killer 因為記憶體耗盡而終止了編譯程序。增加 Swap 或減少並行任務 (<code>-j</code> 參數)。</li>
                        </ul>
                    </li>
                    <li><strong>搜尋錯誤訊息：</strong> 將關鍵的錯誤訊息複製到 Google 或 Chromium 的 Issue Tracker (bugs.chromium.org) 搜尋，看看是否有人遇到過類似問題，尤其是在 ARM64 平台上。</li>
                    <li><strong>清理重試：</strong> 有時奇怪的錯誤可以透過清理建置輸出重試來解決：
                        <pre><code>gn clean out/Default # 清理上次的建置狀態
autoninja -C out/Default chrome ... # 重新開始編譯</code></pre>
                        或者更徹底地刪除 <code>out/Default</code> 目錄再重新 <code>gn gen</code> 和 <code>autoninja</code>。</li>
                </ul>
            </li></ul>
        </li>
    </ol>

     <h3>第 6 步：測試編譯結果</h3>
    <ol>
        <li><strong>編譯成功後，執行檔位於：</strong> <code>out/Default/chrome</code></li>
        <li><p><strong>執行測試：</strong></p>
            <pre><code>./out/Default/chrome --no-sandbox --test-type</code></pre>
            <ul>
                <li><code>--no-sandbox</code>: 首次運行或在某些環境下可能需要禁用沙箱進行測試，但 <strong>正常使用時不應</strong> 禁用沙箱！</li>
                <li><code>--test-type</code>: 避免觸發一些首次運行的流程。</li>
                <li>如果瀏覽器視窗成功打開並基本可用，表示核心編譯成功。</li>
            </ul>
        </li>
    </ol>

    <h3>第 7 步：安裝和設定 Google Remote Desktop Host</h3>
    <p><strong>注意：</strong> 這一步假設你編譯的 Chromium 能夠被 Chrome Remote Desktop Host 接受，這並非保證。</p>
    <ol>
        <li><p><strong>下載 Chrome Remote Desktop Host (.deb):</strong></p>
            <ul>
                <li>前往 Google Remote Desktop 網站: <a href="https://remotedesktop.google.com/access" target="_blank">https://remotedesktop.google.com/access</a></li>
                <li>點擊 "設定遠端存取功能" 的下載按鈕。</li>
                <li>它應該會提供一個適用於 Debian/Ubuntu 的 <code>.deb</code> 檔案。<strong>確認下載的是 ARM64 版本</strong> (文件名通常包含 <code>arm64</code>)。如果網站沒有自動提供 ARM64 版本，可能表示官方不直接支援 Pi 的 ARM64 平台。</li>
            </ul>
        </li>
        <li><p><strong>安裝 .deb 檔案：</strong></p>
            <pre><code>cd &lt;下載目錄&gt;
sudo dpkg -i chrome-remote-desktop_current_arm64.deb</code></pre>
             <ul><li>替換為實際下載的檔案名。</li></ul>
        </li>
        <li><p><strong>處理安裝依賴 (dpkg 可能會報錯):</strong></p>
            <pre><code>sudo apt --fix-broken install -y</code></pre>
            <ul><li>這個命令會自動安裝 <code>dpkg</code> 報錯時缺少的依賴套件。</li></ul>
        </li>
        <li><p><strong>授權與設定：</strong></p>
            <ul>
                <li>安裝完成後，通常需要執行一個命令將主機與你的 Google 帳戶關聯。這個命令通常會在安裝過程結束時顯示，或者你可以在終端機中直接執行 <code>chrome-remote-desktop</code> 相關命令（可能需要查閱其說明文件或網路資料）。</li>
                <li>它可能會要求你在瀏覽器中開啟一個連結，登入 Google 帳號並授權。<strong>這時你需要使用你剛剛編譯的 Chromium</strong>（或其他可以登入 Google 帳號的瀏覽器）來完成這個授權步驟。
                    <pre><code>/path/to/your/compiled/chromium/chrome &lt;授權連結&gt;</code></pre>
                </li>
                <li>設定 PIN 碼等。</li>
            </ul>
        </li>
        <li><p><strong>檢查服務狀態：</strong></p>
            <pre><code>sudo systemctl status chrome-remote-desktop@$USER</code></pre>
            <ul><li>查看服務是否正在運行且沒有錯誤。</li></ul>
        </li>
    </ol>

    <h3>第 8 步：運行時的除錯與缺檔補檔</h3>
    <p>如果在運行編譯好的 Chromium 或 Chrome Remote Desktop 時遇到 "error while loading shared libraries: libXXXX.so.X: cannot open shared object file: No such file or directory" 這類錯誤：</p>
    <ol>
        <li><strong>確認函式庫路徑：</strong> Chromium 可能會尋找特定路徑下的函式庫。</li>
        <li><p><strong>檢查依賴：</strong> 使用 <code>ldd</code> 命令查看執行檔依賴哪些共享函式庫：</p>
            <pre><code>ldd ./out/Default/chrome</code></pre>
            <ul><li>檢查是否有 <code>not found</code> 的條目。</li></ul>
        </li>
        <li><p><strong>安裝缺失的函式庫：</strong> 如果找到缺失的 <code>libXXXX.so.X</code>，使用 <code>apt search</code> 搜尋哪個套件提供該檔案：</p>
            <pre><code>apt-file search libXXXX.so.X  # 可能需要先 sudo apt install apt-file && sudo apt-file update</code></pre>
             <ul><li>找到對應的套件後，使用 <pre><code>sudo apt install &lt;package_name&gt;</code></pre> 安裝。</li></ul>
        </li>
    </ol>

    <h2>總結與提醒：</h2>
    <ul>
        <li>這整個過程極其複雜且耗時，是給有經驗和耐心的使用者嘗試的。</li>
        <li><strong>強烈建議優先使用 <code>sudo apt install chromium-browser</code></strong>，並嘗試用該版本設定 Google Remote Desktop。大多數情況下這是可行的，並且省去數天（甚至可能失敗）的編譯時間。</li>
        <li>準備好大量的時間、耐心、高速且大容量的儲存空間，以及良好的散熱。</li>
        <li>仔細閱讀錯誤訊息是除錯的關鍵。</li>
        <li>Google Remote Desktop 對自編譯 Chromium 的支援無法保證。</li>
    </ul>
    <p>祝你好運！</p>

    <script>
        document.querySelectorAll('pre').forEach(preElement => {
            const codeElement = preElement.querySelector('code');
            if (codeElement) {
                // Create Copy Button
                const copyButton = document.createElement('button');
                copyButton.className = 'copy-button';
                copyButton.textContent = 'Copy';
                preElement.appendChild(copyButton);

                // Create Copied Feedback Span
                const copiedFeedback = document.createElement('span');
                copiedFeedback.className = 'copied-feedback';
                copiedFeedback.textContent = 'Copied!';
                preElement.appendChild(copiedFeedback);

                // Add click event listener
                copyButton.addEventListener('click', () => {
                    const codeToCopy = codeElement.innerText || codeElement.textContent;
                    navigator.clipboard.writeText(codeToCopy).then(() => {
                        // Show feedback
                        copyButton.style.display = 'none'; // Hide button
                        copiedFeedback.style.display = 'inline'; // Show feedback

                        // Hide feedback and show button after 2 seconds
                        setTimeout(() => {
                            copiedFeedback.style.display = 'none';
                            copyButton.style.display = 'inline';
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy text: ', err);
                        // Optionally provide feedback about the failure
                        copyButton.textContent = 'Error';
                        setTimeout(() => {
                           copyButton.textContent = 'Copy';
                        }, 2000);
                    });
                });
            }
        });
    </script>

</body>
</html>